## Apollo ê·¸ë˜ì„œ ë„ˆ ë­”ë°? ë¨¹ëŠ”ê±°ëƒ?

![](https://images.velog.io/images/dooreplay/post/b86e79e6-ffd2-414a-a136-20f6a8c1a115/image.png)

ë‚´ê°€ ì•„ëŠ” ì•„í´ë¡œëŠ” ì–˜ ë¿ì¸ë°....
ì»´í“¨í„° ì„¸ìƒì—ë„ ì•„í´ë¡œê°€ ì¡´ì¬í–ˆë‹¤..!

## ğŸ‘‰ Apollo
- ìë°”ìŠ¤í¬ë¦½íŠ¸ ì•± ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬
- graphQLê³¼ Apollo Clientë¥¼ í•¨ê»˜ ì”€
- ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ê³  ìºì‹±í•´ì£¼ëŠ” ì—­í• ê¹Œì§€ í•¨!


## ğŸ‘‰ Tutorial ë”°ë¼í•˜ê¸°

### ğŸ— ì„¤ì¹˜(í‚¨)
```
npm install apollo-boost @apollo/react-hooks graphql

```

ì¼ë‹¨ ìœ„ì˜ ëª…ë ¹ì–´ë¥¼ ì³ì„œ CRAì•±ì— ì„¤ì¹˜ ê³ ê³ 
ì—¬ê¸°ì„œ apollo-boostëŠ” Apollo Client ì„¤ì¹˜ì— í•„ìš”í•œ ëª¨ë“  íŒ¨í‚¤ì§€ë¥¼ í¬í•¨í•˜ê³  ìˆë‹¤!

### ğŸ¦ Client ë§Œë“¤ê¸°

ë‚˜ëŠ” CRA index.jsì— ê·¸ëŒ€ë¡œ ë¶ˆëŸ¬ì£¼ì—ˆë‹¤!
ì•„ì§ ë°±ì•¤ë“œì™€ ì—°ê²° ì „ì´ê³ , ë‚˜í˜¼ì ì—°ìŠµí•  ê²¸ ê± ê¸°ë³¸ ë¦¬ì•¡íŠ¸íŒì— ê³ ê³ !
ì•„ë˜ì˜ ì½”ë“œì—ì„œ ApolloClientê°€ ë°›ê³ ìˆëŠ” uriëŠ” GraphQL serverì—ì„œ ë°›ëŠ” endpointì´ë‹¤.

ì‹¤í–‰ì‹œí‚¬ë•ŒëŠ” **client.query()** ë¥¼ ì“°ë©´ ëœë‹¤.

```

import React from "react";
import ReactDOM from "react-dom";
import "./index.css";
import App from "./App";
import ApolloClient from "apollo-boost";
import { gql } from "apollo-boost";

const client = new ApolloClient({
  uri: "https://48p1r2roz4.sse.codesandbox.io",
});

client
  .query({
    query: gql`
      {
        rates(currency: "USd") {
          currency
        }
      }
    `,
  })
  .then((result) => console.log(result));


ReactDOM.render(<App />, document.getElementById("root"));

```

uriì˜ ì¶œì²˜ë¥¼ í´ë¦­í•´ë³´ë©´ ì•„ë˜ì˜ ê·¸ë¦¼ì´ ëœ¬ë‹¤!

![](https://images.velog.io/images/dooreplay/post/012627b3-8706-4707-bb9c-d561f2995941/image.png)

í”Œë ˆì´ ë²„íŠ¼ í´ë¦­í•˜ë¼ê³  í•´ì„œ ê´‘í´ í–ˆë”ë‹ˆ ì•„ë¬´ëŸ° ë³€í™”ê°€ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤.
í˜¹ì‹œë‚˜ í•˜ê³  ê°œë°œìë„êµ¬(a.k.a ê°œë„)ë¥¼ ì—´ì–´ë³´ë‹ˆ.. ë‚œë¦¬ë„ ì•„ë‹ˆë‹¤

![](https://images.velog.io/images/dooreplay/post/ccb617c7-297f-4ade-a22c-1ab3673a2404/image.png)

ë¹ ë¹ ë¹ ë¹ ~ ë¹¨ê°„ë§›~~ ê¶ê¸ˆí•´ í—ˆë‹ˆ~~
ì´ë ‡ê²Œ í˜¸ì¶œí•˜ëŠ”ê²Œ ì•„ë‹Œê°‘ë‹¤.. ã…‹ã…‹

ìš°ì¸¡ì˜ ìŠ¤í‚¤ë§ˆì™€ ë…ìŠ¤ ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ë©´ ë­”ê°€ ë‚˜ì˜¤ê¸´ í•œë‹¤

![](https://images.velog.io/images/dooreplay/post/f4f45428-c0ed-42b3-b08a-95e7d9004699/image.png)

ë‚´ê°€ ì›í–ˆë˜ ê±´ json ë°ì´í„°ì˜€ëŠ”ë°.. ë­ê°€ ë‹´ê²¨ìˆëŠ”ì§€ ë³´ê³  ì‹¶ì—ˆëŠ”ë°
ë°ì´í„°ì˜ íƒ€ì…ë§Œ ë‚˜ì˜¬ë¿.. ê·¸ëƒ¥ ì½˜ì†”ì„ í™•ì¸í•˜ëŠ” ìˆ˜ë°–ì— ì—†ëŠ”ê²ƒ ê°™ë‹¤!

ì½˜ì†”ì°½ì„ ì—´ì–´ë³´ë‹ˆ ë°ì´í„°ê°€ ì˜ˆì˜ê²Œ ì˜ ë“¤ì–´ì™€ìˆë‹¤!
ë‚˜ëŠ” í•œêµ­ì¸ì´ë‹ˆê¹Œ KRW í´ë¦­ ã…‹ã…‹

![](https://images.velog.io/images/dooreplay/post/2c112792-9a1c-4076-b216-b164efad8eb1/image.png)


### ğŸ¤ ë¦¬ì•¡íŠ¸ì— client ì—°ê²°í•˜ê¸°
ì—°ê²°ì„ ìœ„í•´ì„  **ApolloProvider** ì»´í¬ë„ŒíŠ¸ê°€ í•„ìš”í•˜ë‹¤.
ì ê¹.. ì´ê±° ì•½ê°„ ì´ë•ìˆ˜ ëƒ„ìƒˆê°€ ë‚˜ëŠ”ë°..? í‚í‚....
reduxë¥¼ ì•„ì§ ë§ˆìŠ¤í„°í•˜ì§€ ëª»í–ˆê¸° ë•Œë¬¸ì—.. ë§›ë§Œ ë´¤ëŠ”ë°.. 
Apollo ë§ˆìŠ¤í„° í•˜ë©´ ì´ë•ìˆ˜ ë‹¤ì‹œ íŒŒë´ì•¼ê² ë‹¤!

ì–´ì¨Œë“  ApolloProviderë¡œ ê°ì‹¸ì¤€ë‹¤!
ì•„ê¹Œ index.jsì— ì¼ë˜ client ë³€ìˆ˜ë¥¼ App.jsë¡œ ì˜®ê²¨ì£¼ì—ˆë‹¤

```
// App.js
import React from "react";
import ApolloClient from "apollo-boost";
import { ApolloProvider } from "@apollo/react-hooks";
import { gql } from "apollo-boost";

const client = new ApolloClient({
  uri: "https://48p1r2roz4.sse.codesandbox.io",
});

client
  .query({
    query: gql`
      {
        rates(currency: "USD") {
          currency
        }
      }
    `,
  })
  .then((result) => console.log(result));

const App = () => (
  <ApolloProvider client={client}>
    <div>
      <h2>My first Apollo app ğŸš€</h2>
    </div>
  </ApolloProvider>
);

export default App;
```

### ğŸ¸ ë°ì´í„° ìš”ì²­í•˜ê¸°
Appì—ë‹¤ê°€ ë­˜ ë” ì¶”ê°€í•´ë³´ì. ì¶”ê°€í•œ ì½”ë“œë§Œ ì¨ë´¤ë‹¤!

```
import { useQuery } from "@apollo/react-hooks";

const ExchangeRates = () => {
  const { loading, error, data } = useQuery(EXCHANGE_RATES);

  if (loading) return <p>Loading...</p>;
  if (error) return <p>Error :(</p>;

  return data.rates.map(({ currency, rate }) => (
    <div key={currency}>
      <p>
        {currency}: {rate}
      </p>
    </div>
  ));
};

// jsx êµ¬ì¡° ìƒëµ. ì—¬ê¸° ì—´ë¦¬ëŠ” ë””ë¸Œ ìˆì–´ìš”!
      <ExchangeRates />

// jsx êµ¬ì¡° ìƒëµ. ì—¬ê¸° ë‹«íˆëŠ” ë””ë¸Œ ìˆì–´ìš”!

```

ì‹ ê¸°í•œê²Œ í•¨ìˆ˜ë¥¼ ê·¸ëƒ¥ ì»´í¬ë„ŒíŠ¸ì²˜ëŸ¼ ê°–ë‹¤ ì“°ë„¤...?!
ë°ì´í„° ìš”ì²­ë°›ì„ë• ì´ë ‡ê²Œ **useQuery** ë¼ëŠ”ê±¸ ì“°ë‚˜ë¶€ë‹¤. 


![](https://images.velog.io/images/dooreplay/post/02acb0f2-93e5-4ca1-8a19-72c2c5be6ed8/image.png)

ì§ ! CSSëŠ” ëª»ì‰¥ê²¼ì§€ë§Œ ì¼ë‹¨ ì½˜ì†”ì— ë–´ë˜ ë°ì´í„°ë“¤ì„ í™”ë©´ì— ë„ìš°ê¸° ì„±ê³µ!
